package permasalahan2simple;


public class Operasi {
	private Stack stack = new Stack();
	private String input;
    
	public Operasi(String input) {
    	this.input = input;
    }
	
//	jika derajat operator soal > derajat operator top of stack () */ +-
//	Push operator soal ke stack
//	Selama derajat operator soal <= derajat operator top of stack
//	Pop top of stack dan masukkan ke dalam posfix
//	Setelah semua dilakukan, push operator soal ke stack

	public String konversi() {
        String postfix = "";
        Character top;
        for (int i = 0; i < input.length(); i++) {
        	char ch = input.charAt(i);
        	if(ch == '+' || ch == '*' || ch == '/' || ch == '-') {
        		if (stack.isEmpty()) {
                    stack.push(ch);
                } 
        		// Jika operator * atau /
                else if (ch == '*' || ch == '/') {
                	top = stack.top();
                    while (!top.equals(('+')) && !top.equals(('-')) && !stack.isEmpty()) {
                    	top = (char) stack.pop(); 
                        postfix += top.charValue();
                    }
                    stack.push(ch);
                }
                
        		// Jika operator + atau -
                else if (ch == '+' || ch == '-') {
                	if (stack.isEmpty()) {
                        stack.push(ch);
                    } else {
                        top = stack.top();
                        while (!(stack.isEmpty())) {
                        	top = (char) stack.pop();
                        	postfix += top.charValue();
                        }
                        stack.push(ch);
                    }
                } 
                
        		
        	} else {
        		postfix += ch;
        	}
        	
		}
        // Jika sudah semua soal sudah dibaca, pop semua isi stack dan push ke postfix sesuai dengan urutannya
        while (!stack.isEmpty()) {
            top = stack.top();
            if (!top.equals(('('))) {
                stack.pop();
                postfix += top.charValue();
            }
        }
        return postfix;
	}
	
	
}
