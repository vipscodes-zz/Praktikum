package permasalahan2simple;


public class Operasi {
	private Stack stack = new Stack();
	private String input;
    
	public Operasi(String input) {
    	this.input = input;
    }

	public String konversi() {
        String postfix = "";
        Character top;
        for (int i = 0; i < input.length(); i++) {
        	char ch = input.charAt(i);
        	if(ch == '(' || ch == ')' || ch == '+' || ch == '*' || ch == '/' || ch == '-') {
        		if (stack.isEmpty()) {
                    stack.push(ch);
                }
        		
        		// jika operasi dilakukan di dalam ( )
        		else if (ch == '(') {
                    stack.push(ch);
                } 
        		else if (ch == ')') {
                    top = stack.top();
                    while (!top.equals('(') || !stack.isEmpty()) {
                        stack.pop();
                        postfix += top.charValue();
                        if (!stack.isEmpty())
                        	top = stack.top();
                    }
                    stack.pop();
                }
        		
        		// Jika operator * atau /
                else if (ch == '*' || ch == '/') {
                	top = stack.top();
                    while (!top.equals('+') || !top.equals('-') || !stack.isEmpty()) {
                    	top = (char) stack.pop(); 
                        postfix += top.charValue();
                    }
                    stack.push(ch);
                }
                
        		// Jika operator + atau -
                else if (ch == '+' || ch == '-') {
                	top = stack.top();
                    while (!top.equals('(') || !top.equals(')') || !stack.isEmpty()) {
                        top = (char) stack.pop();
                        postfix += top.charValue();
                    }
                    stack.push(ch);
                } 
                
        	// Jika operand
        	} else {
        		postfix += ch;
        	}
        	
		}
        // Jika sudah semua soal sudah dibaca, pop semua isi stack dan push ke postfix sesuai dengan urutannya
        while (!stack.isEmpty()) {
            top = stack.top();
            if (!top.equals(('('))) {
                stack.pop();
                postfix += top.charValue();
            }
        }
        return postfix;
	}
	
	
}
